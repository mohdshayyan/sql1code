import mysql.connector
# Connecting from the server
mydb = mysql.connector.connect(
  host="localhost",
  user="root",
  password="root",
  database="school")
print(mydb,"connected to server")

# Define the function to display the menu
def menu():
    print("*" * 130)
    print("\n                                                       ---| Welcome to  School Management System by Shayyan|---\n")
    print("*" * 130)
    print("1. Add new student record")
    print("2. View student details")
    print("3. Update student details")
    print("4. Delete student details")
    print("5. Exit")
# Define the function to add a new student
def add_student():
    Id=input("Enter Student ID: ")
    name = input("Enter student name: ")
    age = input("Enter student age: ")
    gender = input("Enter student gender: ")
    room_no = input("Enter student room no: ")
    cursor = mydb.cursor()
    # CREATING A TABLE
#    cursor.execute('CREATE TABLE students (Id VARCHAR(255),name VARCHAR(255), age VARCHAR(255), gender VARCHAR(255), room_no VARCHAR(255))')
    sql = "INSERT INTO students (Id,name, age, gender, room_no) VALUES (%s,%s, %s, %s, %s)"
    val = (Id,name, age, gender, room_no)
    cursor.execute(sql, val)
    mydb.commit()
    print(cursor.rowcount, "record(s) inserted.")

# Define the function to view student details
def view_students():
    cursor = mydb.cursor()
    cursor.execute("SELECT * FROM students")
    result = cursor.fetchall()
    for row in result:
        print(row)

# Define the function to update student details
def update_student():
    id = input("Enter student id: ")
    name = input("Enter student name: ")
    age = input("Enter student age: ")
    gender = input("Enter student gender: ")
    room_no = input("Enter student room no: ")
    cursor = mydb.cursor()
    sql = "UPDATE students SET name = %s, age = %s, gender = %s, room_no = %s WHERE id = %s"
    val = (name, age, gender, room_no, id)
    cursor.execute(sql, val)
    mydb.commit()
    print(cursor.rowcount, "record(s) updated.")

# Define the function to delete student details
def delete_student():
    Id = input("Enter student id: ")
    cursor = mydb.cursor()
    sql = "DELETE FROM students WHERE Id = %s"
    val = (Id,)
    cursor.execute(sql, val)
    mydb.commit()
    print(cursor.rowcount, "record(s) deleted.")
# Call the menu function
while True:
    menu()
    
    # Get the user's choice
    choice = input("Enter your choice: ")

    # Execute the selected option
    if choice == '1':
        add_student()
    elif choice == '2':
        view_students()
    elif choice == '5':
        print("Exiting...")
    elif choice == '3':
        update_student()
    elif choice == '4':
        delete_student()        
        break
    else:
        print("Invalid choice. Please try again.")
# Disconnecting from the server
mydb.close()
